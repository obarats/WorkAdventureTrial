"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=/(\{(?:[^{}]+|\{(?:[^{}]+)*\})*\})/g,e=t=>t.substring(1,t.length-1),r=(r,n=!0,o="",s="")=>r.split(t).map((r=>{if(!r.match(t))return r;const n=e(r);if(n.startsWith("{"))return((t,e)=>{let[r,n]=t.split(":");n||(n=r,r=e);const o=n.split("|"),[s,i,a,l,c,u]=o,f=o.filter((t=>void 0!==t)).length;return 1===f?{k:r,r:s}:2===f?{k:r,o:s,r:i}:3===f?{k:r,z:s,o:i,r:a}:{k:r,z:s,o:i,t:a,f:l,m:c,r:u}})(e(n),s);const i=(t=>{const[e="",...r]=t.split("|"),[n="",o]=e.split(":"),[s,i]=n.split("?");return{k:s,i:o,n:""===i,f:r}})(n);return s=i.k||s,!o&&(o=s),i})).map((t=>{if("string"==typeof t)return t;t.k||(t.k=o||"0");const e=(t=>Object.fromEntries(Object.keys(t).map((e=>{var r;const n=t[e];return[e,Array.isArray(n)?n.map((t=>null==t?void 0:t.trim())):n===!!n?n:null===(r=n)||void 0===r?void 0:r.trim()]}))))(t);return n?(r=e,Object.fromEntries(Object.entries(r).map((([t,e])=>"i"!==t&&e&&"0"!=e&&[t,e])).filter(Boolean))):e;var r})),n=/^\{.*\}$/,o=/\?\?/g,s=(t,r,s,i)=>t.map((t=>{if("string"==typeof t)return t;const{k:a="0",f:l=[]}=t,c=i[a];if((t=>!(!t.o&&!t.r))(t))return(("boolean"==typeof c?c?t.o:t.r:((t,{z:e,o:r,t:n,f:o,m:s,r:i},a)=>{switch(e&&0==a?"zero":t.select(a)){case"zero":return e;case"one":return r;case"two":return n;case"few":return o;case"many":return s;default:return i}})(r,t,c))||"").replace(o,c);const u=l.length?((t,r,o)=>r.reduce(((r,o)=>{var s,i;return null!==(i=o.match(n)?(()=>{var t;const n=Object.fromEntries(e(o).split(",").map((t=>t.split(":").map((t=>t.trim())))));return null!==(t=n[r])&&void 0!==t?t:n["*"]})():null===(s=t[o])||void 0===s?void 0:s.call(t,r))&&void 0!==i?i:r}),o))(s,l,c):c;return(""+(null!=u?u:"")).trim()})).join(""),i=t=>new Proxy(t?()=>t:{},{get:(e,r)=>i(t?`${t}.${r}`:r)}),a=(t,e,n)=>{const o={},i=new Intl.PluralRules(t);return(t,...a)=>((t,e,r,n)=>{const o=n[0],i=o&&"object"==typeof o&&o.constructor===Object,a=1===n.length&&i?o:n;return s(t,e,r,a)})(((t,e)=>t[e]||(t[e]=r(e)))(o,((t,e)=>{var r;return e.split(".").forEach((e=>t=t[e])),null!==(r=t)&&void 0!==r?r:e})(e,t)),i,n,a)};const l=(t,e,r={})=>new Proxy(e?t.bind(null,e):r,{get:(r,n)=>l(t,e?`${e}.${n}`:n)}),c=t=>new Proxy(t,{get:(e,r)=>!(e===t&&"then"===r)&&t[r]});exports.I18nServiceRoot=class{constructor(t="",e=(()=>({})),r=(()=>({}))){this.baseLocale=t,this.getTranslationForLocale=e,this.initFormatters=r,this._isLoadingLocale=!1,this.currentLocale=null,this._LL=c(i())}async initI18n(t=this.baseLocale){await this.setLocale(t)}get isLoadingLocale(){return this._isLoadingLocale}get LL(){return this._LL}get locale(){return this.currentLocale}async setLocale(t){const e=this.getTranslationForLocale(t),r=this.initFormatters(t);this._LL=c(function(t,e,r={}){return l(a(t,e,r))}(t,e instanceof Promise?await e:e,r instanceof Promise?await r:r)),this.currentLocale=t}};
