"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.i18nObject = void 0;
const core_1 = require("./core.cjs");
const util_string_1 = require("./util.string.cjs");
const getTextFromTranslationKey = (translations, key) => {
    var _a;
    ;
    key.split('.').forEach((k) => (translations = translations[k]));
    return (_a = translations) !== null && _a !== void 0 ? _a : key;
};
const getTranslateInstance = (locale, translations, formatters) => {
    const cache = {};
    const pluralRules = new Intl.PluralRules(locale);
    return (key, ...args) => (0, core_1.translate)((0, util_string_1.getPartsFromString)(cache, getTextFromTranslationKey(translations, key)), pluralRules, formatters, args);
};
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any
function i18nObject(locale, translations, formatters = {}) {
    return createProxy(getTranslateInstance(locale, translations, formatters));
}
exports.i18nObject = i18nObject;

/* PROXY-CJS-START */
// eslint-disable-next-line
const createProxy = (fn, prefixKey, proxyObject = {}) => new Proxy((prefixKey ? fn.bind(null, prefixKey) : proxyObject), {
    get: (target, key) => !(target === proxyObject && key === 'then') && createProxy(fn, prefixKey ? `${prefixKey}.${key}` : key),
});
/* PROXY-CJS-END */
//# sourceMappingURL=util.object.js.map